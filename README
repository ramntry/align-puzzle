Интересная, на мой взгляд, задачка - 
разобраться, почему этот код делает то,
что он делает.

К задаче есть ответ и рекомендации
относительно источников необходимой
информации. Обращайтесь, если заинтересует.

(Пользователям bash / other *nix shell и gcc
будет удобно запускать *.run-script)

RamN

